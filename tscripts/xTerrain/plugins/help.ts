import { Command, commandManager } from '../../lib/yumeCommand/CommandRegistry'

const qrcodeTextGithub =
`111111111111111111111111111
100000001011001011100000001
101111101000100010101111101
101000101110000000101000101
101000101110110001101000101
101000101000010011101000101
101111101011011010101111101
100000001010101010100000001
111111111010001010111111111
100011001000111110000011001
101011010100110110100101001
111001001011010101111100101
101001010101111011010001011
100101100001001111000101011
111100011001101100100110101
100000001000101001111100101
111100010100001000001101001
100101000011110010000011101
111111111010110110111001101
100000001101011110101010101
101111101001110100111001011
101000101110000100000001101
101000101110101110011011011
101000101010100000111001001
101111101010001011101011111
100000001011110010001101101
111111111111111111111111111`.replaceAll('0','  ').replaceAll('1','⬛')

const qrcodeTextRoll =
`11111111111111111111111111111111111
10000000111010000110000101100000001
10111110101011000000110010101111101
10100010111110010110100110101000101
10100010100010100100111101101000101
10100010110111110001000000101000101
10111110100100111110101011101111101
10000000101010101010101010100000001
11111111110001101011110010111111111
10000010000101111000001101010101011
10101111101010000111011000101101101
10010010001011000000110111001011111
11100111111110010111110110000100011
11011100110010100100101110010011011
10110111101111110011010001101110101
10011000000000111101111111000011011
11000001100001101011000110011000001
11101100011001111100111001110011111
10111001010010000101000100100100001
11111010011111000110110010001010011
10101011000010010010000111000100111
11110000001010100001101110110001011
10111011000111111110011001101110101
10101100100000110111100110001101011
10101101011101100110110000000000101
10110010100101110000001010000001011
11111111101010001001010100111000001
10000000101111000010101100101010011
10111110111110010011010010111000001
10100010100010101100111110000011011
10100010101111111011000000110010001
10100010101100110100111011001100111
10111110100101101011100001110100111
10000000100101111100101110011101011
11111111111111111111111111111111111`.replaceAll('0','  ').replaceAll('1','⬛')

const helpCommand = new Command();
helpCommand.register(({ args, isEntity }) => args.length === 0 && isEntity, ({ entity }) => {
    const helpText = [
        "§e§l--- FlashFakePlayerPack 帮助 ---§r",
        "",
        "§6▶ 主要交互方式§r",
        "  将准星对准假人，然后：",
        "  - §f直接右键: §a打开功能菜单",
        "  - §f潜行+右键: §a打开标签(状态)菜单",
        "",
        "§6▶ 基本指令§r",
        "  §f假人创建§7 - 在你所在位置创建一个假人。",
        "  §f假人销毁§7 - 销毁眼前的假人。",
        "  §f假人列表§7 - 查看所有假人序号。",
        "  §f假人帮助 <指令>§7 - 查看特定指令的详细帮助。",
        "",
        "§6▶ 常用指令示例§r",
        "  §f假人创建 \"小白\"§7 - 创建名为\"小白\"的假人。",
        "  §f假人创建 100 64 0§7 - 在指定坐标创建假人。",
        "  §f假人销毁 1§7 - 销毁序号为1的假人。",
        "  §f假人背包交换§7 - 与眼前的假人交换背包。",
        "",
        "§6▶ 技术说明§r",
        "  - §e背包会自动保存§r§7，重启游戏不会导致物品丢失。",
        "  - §7假人可以捡拾地上的物品。",
        "  - §7使用 §f/scriptevent ffp:<指令>§7 可在命令方块中执行。",
        "  - §7输入 §f假人github§7 可获取项目地址。",
    ].join('\n');
    entity.sendMessage(helpText);
});
helpCommand.register(({ args, isEntity }) => args.length > 0 && isEntity, ({ args: [item], entity }) => {
    const helpMessage =
        ({
            "创建": ["创建示例", "假人创建", "假人创建 + 空格 + x y z", "假人创建 100 50 0", "假人创建 + 空格 + name", "假人创建 \"fake player\""],
            "销毁": ["销毁示例", "假人销毁 + 空格 + 序号", "假人销毁 1", "假人销毁 2"],
            "重生": ["重生示例", "假人重生 + 空格 + 序号", "假人重生 1", "假人重生 2"],
            "scriptevent": ["scriptevent 示例", "/scriptevent ffp:ffpp", "/scriptevent ffp:假人生成 100 50 0", "/scriptevent ffp:假人销毁 2"]
        })
            [item]

          helpMessage
            ?
            entity.sendMessage(helpMessage.join("\u000a"))
            :
            entity.sendMessage("对不起，没有这种事情，做不到" + (Math.random() < 0.233 ? "给钱也做不到" : "真做不到"));
});

commandManager.registerCommand(['假人帮助', '假人help'], helpCommand)

const githubCommand = new Command();
githubCommand.register(({ entity }) => entity.sendMessage('§rhttps://github.com/xBoyMinemc 能不能扫上随缘\u000a' + (Math.random() > 0.5 ? qrcodeTextGithub : qrcodeTextRoll)));
commandManager.registerCommand('假人github', githubCommand);


// console.error('[假人]内置插件help加载成功')
